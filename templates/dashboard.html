{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<!-- ================= STUDENT DASHBOARD HEADER ================= -->
<div class="card">
    <div style="display:flex; align-items:center; gap:20px;">

        <!-- Student Photo (VIEW ONLY) -->
        <img src="/{{ student.photo_path if student.photo_path else 'static/default_user.png' }}"
             width="120"
             height="120"
             style="border-radius:50%; object-fit:cover; border:2px solid #ddd;">

        <!-- Student Info -->
        <div>
            <h2>Welcome, {{ student.name }}</h2>
            <p>Email: {{ student.email }} | CGPA: {{ student.cgpa }}</p>
        </div>
    </div>
</div>

<!-- ================= AVAILABLE JOBS ================= -->
<div class="card">
    <h2>Available Jobs</h2>

    {% if jobs %}
    <table width="100%" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>Role</th>
                <th>Company</th>
                <th>Location</th>
                <th>Type</th>
                <th>Min CGPA</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
        {% for job in jobs %}
            <tr>
                <td>{{ job.role }}</td>
                <td>{{ job.company_name }}</td>
                <td>{{ job.location }}</td>
                <td>{{ job.job_type }}</td>
                <td>{{ job.min_cgpa }}</td>
                <td>
                    <form method="POST" action="/apply">
                        <input type="hidden" name="job_id" value="{{ job.job_id }}">
                        <button type="submit">Apply</button>
                    </form>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>No jobs available.</p>
    {% endif %}
</div>

{% endblock %}
